import{d as Q,a1 as i,I as X,o as r,n as _,p as t,t as n,q as a,ah as O,aj as Z,a2 as M,Y as m,m as oo,j as so,r as to,F as U,s as W,M as E,O as q,y as Y,H as g,L as T,f as lo,ak as eo}from"./index-4a3460b5.js";import{s as ao}from"./index-b5ee8cf2.js";const no={class:"progress rounded-[3px] h-6 text-xs flex items-center"},co=["title"],ro=["title"],_o=["title"],uo=["title"],po=Q({__name:"ProposalProcess",props:{tally:{type:Object},pool:{type:Object}},setup(k){const d=k,u=i(()=>{var l;return(l=d.pool)==null?void 0:l.bonded_tokens}),x=X(),y=i(()=>{var l,e,w,v;return Number(((l=d.tally)==null?void 0:l.yes)||((e=d.tally)==null?void 0:e.yes_count))>Number(u.value)?x.calculatePercent(u.value,u.value):x.calculatePercent(((w=d.tally)==null?void 0:w.yes)||((v=d.tally)==null?void 0:v.yes_count),u.value)}),h=i(()=>{var l,e;return x.calculatePercent(((l=d.tally)==null?void 0:l.no)||((e=d.tally)==null?void 0:e.no_count),u.value)}),s=i(()=>{var l,e;return x.calculatePercent(((l=d.tally)==null?void 0:l.abstain)||((e=d.tally)==null?void 0:e.abstain_count),u.value)}),c=i(()=>{var l,e;return x.calculatePercent(((l=d.tally)==null?void 0:l.no_with_veto)||((e=d.tally)==null?void 0:e.no_with_veto_count),u.value)});return(l,e)=>(r(),_("div",no,[t("div",{class:"h-6 bg-yes flex items-center pl-2 text-white overflow-hidden",style:O(`width: ${a(y)}`),title:a(y)},n(a(y)),13,co),t("div",{class:"h-6 bg-no flex items-center text-white overflow-hidden",style:O(`width: ${a(h)}`),title:a(h)},n(a(h)),13,ro),t("div",{class:"h-6 bg-[#B71C1C] flex items-center text-white overflow-hidden",style:O(`width: ${a(c)};`),title:a(c)},n(a(c)),13,_o),t("div",{class:"h-6 bg-secondary flex items-center text-white overflow-hidden",style:O(`width: ${a(s)}`),title:a(s)},n(a(s)),13,uo)]))}});const K=Z(po,[["__scopeId","data-v-4c92a3ae"]]),xo={class:"bg-white dark:bg-[#28334e] rounded text-sm"},yo={class:"table-compact w-full table-fixed hidden lg:!table"},ho={class:"px-4 w-20"},vo=["onClick"],fo={class:"w-full"},bo={key:0,class:"bg-[#f6f2ff] text-[#9c6cff] dark:bg-gray-600 dark:text-gray-300 inline-block rounded-full px-2 py-[1px] text-xs mb-1"},io={class:"w-60"},go={class:"w-36"},ko={class:"pl-4"},Oo={class:"text-xs"},Eo={class:"truncate col-span-2 md:!col-span-1 text-xs text-gray-500 dark:text-gray-400 text-right md:!flex md:!justify-start"},To={key:0,class:"w-40"},wo={class:""},So=["onClick"],Po={key:0},Co={key:1},Do={class:"lg:!hidden"},No={class:"text-main text-base mb-1 flex justify-between hover:text-indigo-400"},$o=["onClick"],Io={class:"grid grid-cols-4 mt-2 mb-2"},Vo={class:"col-span-2"},Ao={key:0,class:"bg-[#f6f2ff] text-[#9c6cff] dark:bg-gray-600 dark:text-gray-300 inline-block rounded-full px-2 py-[1px] text-xs mb-1"},Ro={class:"truncate text-xs text-gray-500 dark:text-gray-400 flex items-center justify-end"},jo={key:0,class:"mt-4"},Lo={class:"flex justify-between"},Jo={class:"text-xs flex items-center"},Bo=["onClick"],Go={key:0},zo={key:1},Fo=t("input",{type:"checkbox",id:"proposal-detail-modal",class:"modal-toggle"},null,-1),Ho={for:"proposal-detail-modal",class:"modal"},Uo={class:"modal-box !w-11/12 !max-w-5xl",for:""},Wo=t("label",{for:"proposal-detail-modal",class:"btn btn-sm btn-circle absolute right-2 top-2"},"âœ•",-1),qo=t("h3",{class:"font-bold text-lg"},"Description",-1),Yo={class:"py-4"},Xo=Q({__name:"ProposalListItem",props:{proposals:{type:Object}},setup(k){const d=M(),u=X(),x=m(),y=oo();function h(e){return e&&e.substring(e.lastIndexOf(".")+1)}const s={PROPOSAL_STATUS_VOTING_PERIOD:"VOTING",PROPOSAL_STATUS_PASSED:"PASSED",PROPOSAL_STATUS_REJECTED:"REJECTED"},c=so();function l(e){return e?JSON.parse(e):{}}return(e,w)=>{var P,C,D,N,$,I,V,A,R,j,L,J,B,G,z,F,H;const v=to("RouterLink");return r(),_("div",xo,[t("table",yo,[t("tbody",null,[(r(!0),_(U,null,W((P=k.proposals)==null?void 0:P.proposals,(o,S)=>{var f;return r(),_("tr",{key:S},[t("td",ho,[t("label",{for:"proposal-detail-modal",class:"text-main text-base hover:text-indigo-400 cursor-pointer",onClick:p=>c.value=o}," #"+n(o==null?void 0:o.proposal_id),9,vo)]),t("td",fo,[t("div",null,[E(v,{to:`/${a(y).chainName}/gov/${o==null?void 0:o.proposal_id}`,class:"text-main text-base mb-1 block hover:text-indigo-400 truncate"},{default:q(()=>{var p,b;return[Y(n(((p=o==null?void 0:o.content)==null?void 0:p.title)||(o==null?void 0:o.title)||((b=l(o==null?void 0:o.metadata))==null?void 0:b.title)),1)]}),_:2},1032,["to"]),o.content?(r(),_("div",bo,n(h(o.content["@type"])),1)):g("",!0)])]),t("td",io,[E(K,{pool:a(x).pool,tally:o.final_tally_result},null,8,["pool","tally"])]),t("td",go,[t("div",ko,[t("div",{class:T(["flex items-center",(s==null?void 0:s[o==null?void 0:o.status])==="PASSED"?"text-yes":(s==null?void 0:s[o==null?void 0:o.status])==="REJECTED"?"text-no":"text-info"])},[t("div",{class:T(["w-1 h-1 rounded-full mr-2",(s==null?void 0:s[o==null?void 0:o.status])==="PASSED"?"bg-yes":(s==null?void 0:s[o==null?void 0:o.status])==="REJECTED"?"bg-no":"bg-info"])},null,2),t("div",Oo,n((s==null?void 0:s[o==null?void 0:o.status])||(o==null?void 0:o.status)),1)],2),t("div",Eo,n(a(u).toDay(o.voting_end_time,"from")),1)])]),(s==null?void 0:s[o==null?void 0:o.status])==="VOTING"?(r(),_("td",To,[t("div",wo,[t("label",{for:"vote",class:"btn btn-xs btn-primary rounded-sm",onClick:p=>a(d).open("vote",{proposal_id:o==null?void 0:o.proposal_id})},[(o==null?void 0:o.voterStatus)!=="VOTE_OPTION_NO_WITH_VETO"?(r(),_("span",Po,n((f=o==null?void 0:o.voterStatus)==null?void 0:f.replace("VOTE_OPTION_","")),1)):(r(),_("span",Co,"Vote"))],8,So)])])):g("",!0)])}),128))])]),t("div",Do,[(r(!0),_(U,null,W((C=k.proposals)==null?void 0:C.proposals,(o,S)=>{var f;return r(),_("div",{key:S,class:"px-4 py-4"},[t("div",No,[E(v,{to:`/${a(y).chainName}/gov/${o==null?void 0:o.proposal_id}`,class:"flex-1 w-0 truncate mr-4"},{default:q(()=>{var p,b;return[Y(n(((p=o==null?void 0:o.content)==null?void 0:p.title)||(o==null?void 0:o.title)||((b=l(o==null?void 0:o.metadata))==null?void 0:b.title)),1)]}),_:2},1032,["to"]),t("label",{for:"proposal-detail-modal",class:"text-main text-base hover:text-indigo-400 cursor-pointer",onClick:p=>c.value=o}," #"+n(o==null?void 0:o.proposal_id),9,$o)]),t("div",Io,[t("div",Vo,[o.content?(r(),_("div",Ao,n(h(o.content["@type"])),1)):g("",!0)]),t("div",Ro,n(a(u).toDay(o.voting_end_time,"from")),1)]),t("div",null,[E(K,{pool:a(x).pool,tally:o.final_tally_result},null,8,["pool","tally"])]),(s==null?void 0:s[o==null?void 0:o.status])==="VOTING"?(r(),_("div",jo,[t("div",Lo,[t("div",{class:T(["flex items-center",(s==null?void 0:s[o==null?void 0:o.status])==="PASSED"?"text-yes":(s==null?void 0:s[o==null?void 0:o.status])==="REJECTED"?"text-no":"text-info"])},[t("div",{class:T(["w-1 h-1 rounded-full mr-2",(s==null?void 0:s[o==null?void 0:o.status])==="PASSED"?"bg-yes":(s==null?void 0:s[o==null?void 0:o.status])==="REJECTED"?"bg-no":"bg-info"])},null,2),t("div",Jo,n((s==null?void 0:s[o==null?void 0:o.status])||(o==null?void 0:o.status)),1)],2),t("label",{for:"vote",class:"btn btn-xs btn-primary rounded-sm",onClick:p=>a(d).open("vote",{proposal_id:o==null?void 0:o.proposal_id})},[(o==null?void 0:o.voterStatus)!=="VOTE_OPTION_NO_WITH_VETO"?(r(),_("span",Go,n((f=o==null?void 0:o.voterStatus)==null?void 0:f.replace("VOTE_OPTION_","")),1)):(r(),_("span",zo,"Vote"))],8,Bo)])])):g("",!0)])}),128))]),Fo,t("label",Ho,[t("label",Uo,[Wo,qo,t("p",Yo,[(N=(D=c.value)==null?void 0:D.content)!=null&&N.description||($=c.value)!=null&&$.summary||(V=l((I=c.value)==null?void 0:I.metadata))!=null&&V.summary?(r(),lo(eo(a(ao)(((R=(A=c.value)==null?void 0:A.content)==null?void 0:R.description)||((j=c.value)==null?void 0:j.summary)||((J=l((L=c.value)==null?void 0:L.metadata))==null?void 0:J.summary),"horizontal")),{key:0,value:((G=(B=c.value)==null?void 0:B.content)==null?void 0:G.description)||((z=c.value)==null?void 0:z.summary)||((H=l((F=c.value)==null?void 0:F.metadata))==null?void 0:H.summary)},null,8,["value"])):g("",!0)])])])])}}});export{Xo as _};
